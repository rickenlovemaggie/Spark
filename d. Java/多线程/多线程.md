多线程可能给程序带来的几个问题

1、安全性问题
自加、

2、活跃性问题
死锁

3、性能问题

线程切换带来的开销、编译器会损失一些性能优化


带来问题的根本原因在于：线程间未经同步的可变变量之间的共享

所以处理多线程的几个方法就在于：1、消除共享；2、使用不可变变量；3、同步代码

同步代码的几种方式：1、synchronized关键字；2、volatile类型的变量；3、显示锁；4、原子变量

首先volatile关键字修饰的是单个变量，它只保证了变量在多个线程上的可见性，其上的操作仍然不是原子的。在java.util.concurrent.atomic包中，定义了一系列的原子类，如AtomicLong等。synchronized关键字实际上使用的内置锁，这种锁是以线程为单位，而不是以调用。



无状态对象必然是线程安全的。

其实判断是否需要加锁很简单：如果两段代码不能被多个线程同时执行，那就需要加锁。
